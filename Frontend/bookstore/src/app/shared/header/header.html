<header class="header" id="header">
  <div class="header__container">
    <a href="#" class="nav__logo"> <i class="ri-book-3-line"></i> Librería </a>

    <div class="nav__menu" id="nav-menu">
      <ul class="nav__list">
        <li class="nav__item">
          <a href="#home" class="nav__link active-link">
            <span>Inicio</span>
          </a>
        </li>

        <li class="nav__item">
          <a href="#libros" class="nav__link">
            <span>Libros</span>
          </a>
        </li>

        <li class="nav__item">
          <a routerLink="/about" class="nav__link">
            <span>Sobre Nosotros</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="nav__actions">
      <button class="nav__toggle theme-toggle" (click)="toggleTheme()" aria-label="Toggle theme">
        <i [class]="isDark ? 'ri-sun-line' : 'ri-moon-line'"></i>
      </button>
      @if (auth.userSignal()) {
      <div class="user-menu" #userMenu role="menu" [class.open]="menuOpen">
        <div class="user-area" (click)="toggleUserMenu($event)">
          <div class="user-badge" title="{{ auth.userSignal()!.name }}">
            {{ getInitials(auth.userSignal()!.name) }}
          </div>

          <div class="user-meta">
            <div class="user-name">
              {{ getLocalPart(auth.userSignal()!.email || auth.userSignal()!.name) }}
            </div>
            <i class="ri-arrow-down-s-line chevron" aria-hidden="true"></i>
          </div>
        </div>

        <div class="user-menu__dropdown">
          <ul class="user-menu__list">
            <li
              class="user-menu__item user-menu__item--profile"
              [routerLink]="profileRoute"
              (click)="debugProfileClick($event)"
            >
              <div class="profile-avatar" aria-hidden="true">
                {{ getInitials(auth.userSignal()!.name) }}
              </div>
              <div class="profile-meta">
                <div class="profile-name">{{ auth.userSignal()!.name }}</div>
                <div class="profile-sub">
                  Mi perfil<i class="ri-arrow-right-s-line chevron"></i>
                </div>
              </div>
            </li>
            @if (isAdmin) {
            <li class="user-menu__item" (click)="onAdminGenresClick()">Gestión de Géneros</li>
            <li class="user-menu__item" (click)="onAdminAuthorsClick()">Gestión de Autores</li>
            } @else if (!isSellerRoute) {
            <li class="user-menu__item" (click)="onCardsClick()">Mis tarjetas</li>
            <li class="user-menu__item" (click)="onPurchasesClick()">Mis compras</li>
            <li class="user-menu__item" (click)="onSellClick()">Vender</li>
            } @else {
            <li class="user-menu__item" (click)="onSellerSalesClick()">Mis ventas</li>
            <li class="user-menu__item" (click)="onSellerCatalogClick()">Mi catalogo</li>
            <li class="user-menu__item" (click)="onHeaderToggle()">{{ toggleLabel }}</li>
            }
            <li class="user-menu__item" (click)="logout()">Salir</li>
          </ul>
        </div>

        @if(!isAdmin && !isSellerRoute){
          <button class="user-cart">
            <i class="ri-shopping-cart-2-line" (click)="onCartClick()"></i>
          </button>
        }

      </div>
      } @else {
      <a routerLink="/register" class="nav__link">Creá tu cuenta</a>
      <a routerLink="/login" class="nav__link">Ingresá</a>
      }
    </div>
  </div>
</header>
